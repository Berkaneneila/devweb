<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard | World Tours</title>
    <link rel="stylesheet" href="navbar.css">
    <link rel="stylesheet" href="user.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navbar will be loaded here -->
    <div id="navbar-container"></div>

    <main class="user-dashboard">
        <!-- Sidebar Navigation -->
        <aside class="dashboard-sidebar">
            <div class="sidebar-header">
                <div class="user-avatar">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2NjY2NjYyI+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgM2MyLjY3IDAgNC44NCAyLjE3IDQuODQgNC44NCAwIDIuNjctMi4xNyA0Ljg0LTQuODQgNC44NC0yLjY3IDAtNC44NC0yLjE3LTQuODQtNC44NCAwLTIuNjcgMi4xNy00Ljg0IDQuODQtNC44NHptMCAxMmM0LjQyIDAgOC4xNy0yLjIyIDkuNTQtNS41NS0yLjY5LTEuNzMtNi4xNC0yLjctOS41NC0yLjctMy40IDAtNi44NS45Ny05LjU0IDIuNyAxLjM3IDMuMzMgNS4xMiA1LjU1IDkuNTQgNS41NXoiLz48L3N2Zz4=" alt="User Avatar" id="userAvatar">
                    <div class="status-indicator online"></div>
                </div>
                <h3 id="user-name">Loading...</h3>
                <p id="user-email">Loading...</p>
            </div>
            <nav class="sidebar-nav">
                <a href="#profile" class="active"><i class="fas fa-user"></i> Profile</a>
                <a href="#favorites"><i class="fas fa-heart"></i> Favorites</a>
                <a href="#bookings"><i class="fas fa-calendar-check"></i> Bookings</a>
                <a href="#reviews"><i class="fas fa-star"></i> Reviews</a>
                <a href="#settings"><i class="fas fa-cog"></i> Settings</a>
                <a href="#admin-panel" id="sidebar-admin-link" style="display:none;"><i class="fas fa-tools"></i> Admin Panel</a>
            </nav>
            <div class="sidebar-footer">
                <button class="logout-btn" id="sidebarLogoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="dashboard-content">
            <!-- Profile Section -->
            <section id="profile" class="dashboard-section active">
                <div class="section-header">
                    <h2>My Profile</h2>
                    <button class="edit-profile-btn"><i class="fas fa-edit"></i> Edit Profile</button>
                </div>
                <div class="profile-grid">
                    <div class="profile-card">
                        <h3>Personal Information</h3>
                        <div class="info-group">
                            <label>Full Name</label>
                            <p id="profile-fullname">Loading...</p>
                        </div>
                        <div class="info-group">
                            <label>Email</label>
                            <p id="profile-email">Loading...</p>
                        </div>
                        <div class="info-group">
                            <label>Username</label>
                            <p id="profile-username">Loading...</p>
                        </div>
                    </div>
                    <div class="profile-card">
                        <h3>Account Statistics</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <i class="fas fa-heart"></i>
                                <span class="stat-number">0</span>
                                <span class="stat-label">Favorites</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-calendar-check"></i>
                                <span class="stat-number">0</span>
                                <span class="stat-label">Bookings</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-star"></i>
                                <span class="stat-number">0</span>
                                <span class="stat-label">Reviews</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Favorites Section -->
            <section id="favorites" class="dashboard-section">
                <div class="section-header">
                    <h2>Favorite Destinations</h2>
                    <div class="section-actions">
                        <button class="filter-btn active">All</button>
                        <button class="filter-btn">Cities</button>
                        <button class="filter-btn">Beaches</button>
                        <button class="filter-btn">Desert</button>
                    </div>
                </div>
                <div class="favorites-grid" id="favorites-list">
                    <div class="favorite-card">
                        <div class="card-image">
                            <img src="photos yassir/algiers bey.jpg" alt="Algiers">
                            <button class="remove-favorite-btn" title="Remove from favorites">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <div class="card-content">
                            <h4>Algiers</h4>
                            <div class="card-meta">
                                <span><i class="fas fa-star"></i> 4.8</span>
                                <span><i class="fas fa-map-marker-alt"></i> North</span>
                            </div>
                            <p>The White City blending French colonial architecture with Ottoman heritage.</p>
                            <button class="view-details-btn">View Details</button>
                        </div>
                    </div>
                    <!-- More favorite cards... -->
                </div>
            </section>

            <!-- Bookings Section -->
            <section id="bookings" class="dashboard-section">
                <div class="section-header">
                    <h2>My Bookings</h2>
                    <div class="section-actions">
                        <button class="filter-btn active">All</button>
                        <button class="filter-btn">Upcoming</button>
                        <button class="filter-btn">Past</button>
                    </div>
                </div>
                <div class="bookings-grid" id="bookings-list">
                    <div class="booking-card">
                        <div class="card-image">
                            <img src="photos yassir/Djanet.jpg" alt="Djanet">
                            <span class="booking-status confirmed">Confirmed</span>
                        </div>
                        <div class="card-content">
                            <h4>Djanet Adventure</h4>
                            <div class="booking-details">
                                <p><i class="fas fa-calendar"></i> June 1-7, 2024</p>
                                <p><i class="fas fa-users"></i> 2 Adults</p>
                                <p><i class="fas fa-hotel"></i> Luxury Desert Camp</p>
                            </div>
                            <div class="booking-actions">
                                <button class="view-details-btn">View Details</button>
                                <button class="cancel-booking-btn">Cancel Booking</button>
                            </div>
                        </div>
                    </div>
                    <!-- More booking cards... -->
                </div>
            </section>

            <!-- Reviews Section -->
            <section id="reviews" class="dashboard-section">
                <div class="section-header">
                    <h2>My Reviews</h2>
                </div>
                <div class="reviews-grid">
                    <div class="review-card">
                        <div class="review-header">
                            <img src="photos yassir/algiers bey.jpg" alt="Algiers">
                            <div>
                                <h4>Algiers Tour</h4>
                                <div class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                            <span class="review-date">March 15, 2024</span>
                        </div>
                        <p class="review-text">Amazing experience! The tour guide was knowledgeable and the city was beautiful.</p>
                    </div>
                    <!-- More review cards... -->
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="dashboard-section">
                <div class="section-header">
                    <h2>Account Settings</h2>
                </div>
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>Personal Information</h3>
                        <form class="settings-form">
                            <div class="form-group">
                                <label>Full Name</label>
                                <input type="text" value="John Doe">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" value="johndoe@email.com">
                            </div>
                            <div class="form-group">
                                <label>Phone</label>
                                <input type="tel" value="+213 123 456 789">
                            </div>
                            <button type="submit" class="save-btn">Save Changes</button>
                        </form>
                    </div>
                    <div class="settings-card">
                        <h3>Password</h3>
                        <form class="settings-form">
                            <div class="form-group">
                                <label>Current Password</label>
                                <input type="password">
                            </div>
                            <div class="form-group">
                                <label>New Password</label>
                                <input type="password">
                            </div>
                            <div class="form-group">
                                <label>Confirm New Password</label>
                                <input type="password">
                            </div>
                            <button type="submit" class="save-btn">Update Password</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Admin Panel Section (admin only) -->
            <section id="admin-panel" class="dashboard-section admin-section" style="display:none;">
                <div class="section-header">
                    <h2>Admin Panel</h2>
                </div>
                <div class="admin-actions">
                    <button class="admin-btn" id="manage-users-btn"><i class="fas fa-users-cog"></i> Manage Users</button>
                    <button class="admin-btn" id="site-analytics-btn"><i class="fas fa-chart-line"></i> Site Analytics</button>
                    <button class="admin-btn" id="add-destination-btn"><i class="fas fa-plus"></i> Add Destination</button>
                </div>
                <div class="admin-content" id="admin-content">
                    <!-- Admin content will be loaded here -->
                </div>
            </section>
        </div>
    </main>

    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Profile</h3>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <form class="edit-profile-form">
                <div class="form-group">
                    <label>Profile Picture</label>
                    <div class="avatar-upload">
                        <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2NjY2NjYyI+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgM2MyLjY3IDAgNC44NCAyLjE3IDQuODQgNC44NCAwIDIuNjctMi4xNyA0Ljg0LTQuODQgNC44NC0yLjY3IDAtNC44NC0yLjE3LTQuODQtNC44NCAwLTIuNjcgMi4xNy00Ljg0IDQuODQtNC44NHptMCAxMmM0LjQyIDAgOC4xNy0yLjIyIDkuNTQtNS41NS0yLjY5LTEuNzMtNi4xNC0yLjctOS41NC0yLjctMy40IDAtNi44NS45Ny05LjU0IDIuNyAxLjM3IDMuMzMgNS4xMiA1LjU1IDkuNTQgNS41NXoiLz48L3N2Zz4=" alt="Profile Picture" id="profileAvatar">
                        <button type="button" class="upload-btn">Change Picture</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" value="John Doe">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" value="johndoe@email.com">
                </div>
                <div class="form-group">
                    <label>Phone</label>
                    <input type="tel" value="+213 123 456 789">
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-btn">Cancel</button>
                    <button type="submit" class="save-btn">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="simple-footer">
        <div class="footer-container">
            <div class="footer-left">
                <span class="footer-logo">World Tours</span>
                <p>&copy; 2024 World Tours. All rights reserved.</p>
            </div>
            <div class="footer-links">
                <a href="index.html">Home</a>
                <a href="destinations.html">Destinations</a>
                <a href="services.html">Services</a>
                <a href="aboutUs.html">About</a>
                <a href="contact.html">Contact</a>
            </div>
            <div class="footer-social">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
            </div>
        </div>
    </footer>
    <!-- End Footer -->

    <script src="js/auth.js"></script>
    <script>
        // Load navbar and initialize auth
        document.addEventListener('DOMContentLoaded', function() {
            fetch('navbar.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('navbar-container').innerHTML = data;
                    if (typeof auth !== 'undefined') {
                        auth.init();
                        
                        // Check if user is logged in
                        if (!auth.requireAuth()) {
                            return; // Redirect will happen in requireAuth if not logged in
                        }

                        // Update user information
                        const user = auth.getCurrentUser();
                        document.getElementById('user-name').textContent = user.first_name + ' ' + user.last_name;
                        document.getElementById('user-email').textContent = user.email;
                        document.getElementById('profile-fullname').textContent = user.first_name + ' ' + user.last_name;
                        document.getElementById('profile-email').textContent = user.email;
                        document.getElementById('profile-username').textContent = user.username;

                        // Show admin panel if user is admin
                        if (auth.isAdmin()) {
                            document.getElementById('sidebar-admin-link').style.display = 'block';
                            document.getElementById('admin-panel').style.display = 'block';
                        }

                        // Add logout event listeners
                        document.getElementById('sidebarLogoutBtn').addEventListener('click', function(e) {
                            e.preventDefault();
                            auth.logout();
                        });
                    }
                })
                .catch(err => console.error('Navbar load failed:', err));
        });
    </script>
</body>
</html> 